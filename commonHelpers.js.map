{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst API_KEY = '43146074-d3428091907388d5fa71ff65d';\n\nexport async function fetchImages(searchTerm, page = 1) {\n  const queryParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchTerm,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${queryParams.toString()}`\n    );\n\n    if (response.status !== 200) {\n      throw new Error('Failed to fetch images');\n    }\n\n    const data = response.data;\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.show({\n        backgroundColor: 'rgba(239, 64, 64, 1)',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: 'rgba(250, 250, 251, 1)',\n        position: 'center',\n      });\n    }\n\n    return {\n      images: data.hits,\n      totalHits: data.totalHits,\n    };\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images',\n      position: 'center',\n    });\n    throw new Error('Failed to fetch images');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function displayImages(images) {\n  const gallery = document.querySelector('.gallery');\n  images.forEach(image => {\n    const listItem = document.createElement('li');\n    listItem.classList.add('card');\n\n    const link = document.createElement('a');\n    link.classList.add('card-link');\n    link.href = image.largeImageURL;\n\n    const img = document.createElement('img');\n    img.classList.add('card-image');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n\n    const info = document.createElement('div');\n    info.classList.add('card-info');\n\n    const likes = document.createElement('p');\n    likes.textContent = `Likes: \n    ${image.likes}`;\n\n    const views = document.createElement('p');\n    views.textContent = `Views: \n    ${image.views}`;\n\n    const comments = document.createElement('p');\n    comments.textContent = `Comments: \n    ${image.comments}`;\n\n    const downloads = document.createElement('p');\n    downloads.textContent = `Downloads: \n    ${image.downloads}`;\n\n    info.appendChild(likes);\n    info.appendChild(views);\n    info.appendChild(comments);\n    info.appendChild(downloads);\n\n    link.appendChild(img);\n    listItem.appendChild(link);\n    listItem.appendChild(info);\n    gallery.appendChild(listItem);\n  });\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n\nexport function showAlert(message) {\n  alert(message);\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { displayImages, showAlert } from './js/render-functions.js';\n\nlet searchTerm = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('search-form');\n  const searchInput = document.getElementById('search-input');\n  const gallery = document.querySelector('.gallery');\n  const loader = document.querySelector('.loader');\n  const loadMoreBtn = document.getElementById('load-more-btn');\n  const endMessage = document.getElementById('end-message');\n  loader.style.display = 'none';\n  loadMoreBtn.style.display = 'none';\n\n  searchInput.addEventListener('input', event => {\n    searchTerm = event.target.value.trim();\n  });\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    if (!searchTerm) {\n      showAlert('Please enter a search term');\n      return;\n    }\n    currentPage = 1;\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n    searchInput.value = '';\n    try {\n      loader.style.display = 'block';\n\n      const { images, total } = await fetchImages(searchTerm, currentPage);\n      totalHits = total;\n      displayImages(images, gallery);\n\n      loader.style.display = 'none';\n      if (images.length > 0) {\n        displayImages(images, gallery);\n        if (images.length === 15) {\n          loadMoreBtn.style.display = 'block';\n        }\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      showAlert('Failed to fetch images');\n      console.error(error);\n    }\n  });\n  loadMoreBtn.addEventListener('click', async () => {\n    try {\n      currentPage++;\n      loader.style.display = 'block';\n\n      const { images, total } = await fetchImages(searchTerm, currentPage);\n      totalHits = total;\n      displayImages(images, gallery);\n\n      loader.style.display = 'none';\n      if (\n        images.length < 15 ||\n        (totalHits > 0 && gallery.childElementCount >= totalHits)\n      ) {\n        loadMoreBtn.style.display = 'none';\n        endMessage.style.display = 'block';\n      }\n    } catch (error) {\n      loader.style.display = 'none';\n      showAlert('Failed to fetch images');\n    }\n  });\n});\n"],"names":["API_KEY","fetchImages","searchTerm","page","queryParams","response","axios","data","iziToast","displayImages","images","gallery","image","listItem","link","img","info","likes","views","comments","downloads","SimpleLightbox","showAlert","message","currentPage","totalHits","form","searchInput","loader","loadMoreBtn","endMessage","event","total","error"],"mappings":"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"}